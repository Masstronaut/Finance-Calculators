<html>
    <body>
        <p>Initial Balance ($):<br>
            <input type="number" id="StartingBalance" name="Starting balance" value="1000">
        </p>
        <p>
            Inflation rate (%):<br>
            <input type="number" id="InflationRate" name="Inflation rate" value="2.5" size="4">%
        </p>
        <p>
            Years:<br>
            <input type="number" id="CompoundingPeriod" name="Compounding period" value="10" size="2"> 
        </p>
        <p>
            Ending balance:<br>
            <input type="text" id="EndingBalance" readonly="readonly">
        </p>
        <div id="RJSStartingBalance"></div>
        <p id="output"></p>
        <script>
            function DefaultValueIfEmpty(element){
                if(element.value=="" || isNaN(element.value) || element.value==null){
                    document.getElementById(element.id).value = element.defaultValue;
                }
            }
            function Render(){
                var data = {};
                data.StartingBalance = document.getElementById("StartingBalance").value;
                data.InflationRate = document.getElementById("InflationRate").value/100;
                data.CompoundingPeriod = document.getElementById("CompoundingPeriod").value;
                var postinflation = data.StartingBalance*(1-data.InflationRate)**data.CompoundingPeriod;
                document.getElementById("EndingBalance").value = formatMoney(postinflation);
                return postinflation;
            }
            function OnGainFocus(element){
                document.getElementById(element.id).style.backgroundColor = "yellow";
            }
            function OnLoseFocus(element){
                document.getElementById(element.id).style.backgroundColor = "";
                DefaultValueIfEmpty(element);
            }
            function formatMoney(number) {
                return new Intl.NumberFormat('en-US', {style: 'currency', currency:'USD'}).format(number);
            }
            ["StartingBalance","InflationRate","CompoundingPeriod"].forEach((item, index, array)=>{
                let element = document.getElementById(item);
                element.addEventListener("focusin", ()=>{
                    OnGainFocus(element);
                });
                element.addEventListener("focusout", ()=>{
                    OnLoseFocus(element);
                });
                // re-compute the ending balance continually as the user changes inputs.
                // This will cause it to recalculate for each digit entered or deleted in the form.
                element.addEventListener("input",()=>{
                    Render();
                });
            });
            Render();
        </script>
    


    </body>
</html>