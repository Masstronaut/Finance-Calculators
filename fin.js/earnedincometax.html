<html>
<title>Income Tax Calculator 2020</title>

<head>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400&display=swap" rel="stylesheet">
    <link href="calccommon.css" type="text/css" rel="stylesheet">
    <script type="text/javascript" src="calccommon.js"></script>
    <script type="text/javascript" src="entry-field.js"></script>
</head>

<body>
    <form class="Calculator">
        <h1>2020 Income tax calculator</h1>
        <entry-field type="number" class="NumberEntry" id="income" label="Pre-tax income"></entry-field>
        <entry-field type="number" class="NumberEntry" id="deduction" label="Tax deductions" title="The standard deduction amount in 2020 is $12,400. If you are not itemizing, leave the value at 12400."></entry-field>
        <entry-field type="text" class="NumberEntry" id="TaxAmount" label="Tax amount" readonly></entry-field>
        <entry-field type="text" class="NumberEntry" id="PostTaxAmount" label="Post-tax income" readonly></entry-field>
    </form>
    <script>
        function Render() {
            let income = document.getElementById("income").value;
            let deduction = document.getElementById("deduction").value;
            let tax = CalculateTax(income, deduction);
            let taxedincome = income - tax;
            if (tax != null) {
                document.getElementById("TaxAmount").value = formatMoney(tax.taxamount);
                document.getElementById("PostTaxAmount").value = formatMoney(tax.posttax);
            } else {
                document.getElementById("TaxAmount").value = "";
                document.getElementById("PostTaxAmount").value = "";
            }
        }
        // Event listeners for form fields gaining focus
        [].forEach.call(document.getElementsByClassName("NumberEntry"),(item) => {
            item.addEventListener("input", Render);
        });
        Render();
    </script>
</body>

</html>