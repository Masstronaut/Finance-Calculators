<html>
<title>Inverse Tax Calculator 2020</title>

<head>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400&display=swap" rel="stylesheet">
    <link href="calccommon.css" type="text/css" rel="stylesheet">
    <script type="text/javascript" src="calccommon.js"></script>
    <script type="text/javascript" src="entry-field.js"></script>
</head>

<body>
    <form class="Calculator" id="pretaxcalc">
        <h1>2020 Inverse income tax calculator</h1>
        <entry-field title="This is a test title." class="NumberEntry" type="number" id="income" label="Desired income"></entry-field>
        <entry-field type="number" id="deduction" class="NumberEntry" label="Deduction"></entry-field>
        
        <entry-field type="text" id="TaxAmount" tabindex=-1 readonly="readonly" label="Tax amount"></entry-field>
        <entry-field type="text" id="PreTaxAmount" tabindex=-1 readonly="readonly" label="Required income"></entry-field>
    </form>
    <script>
        function Render() {
            let income = document.getElementById("income").value;
            let deduction = document.getElementById("deduction").value;
            let tax = CalculatePreTax(income, deduction);
            if (tax != null) {
                document.getElementById("TaxAmount").value = formatMoney(tax.taxamount);
                document.getElementById("PreTaxAmount").value = formatMoney(tax.pretax);
            } else {
                document.getElementById("TaxAmount").value = "";
                document.getElementById("PreTaxAmount").value = "";
            }
        }

        // Event listeners for form fields gaining focus
        [].forEach.call(document.getElementsByClassName("NumberEntry"), (item) => {
            item.addEventListener("input", Render);
        });
        Render();
    </script>
</body>

</html>