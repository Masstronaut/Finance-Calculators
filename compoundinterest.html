<html>
    <body>
        <p>Initial Balance ($):<br>
            <input type="number" id="StartingBalance" name="Starting balance">
        </p>
        <p>
            Interest rate (%):<br>
            <input type="number" id="InterestRate" name="Interest rate" value="10" size="4">%
        </p>
        <p>
            Inflation rate (%):<br>
            <input type="number" id="InflationRate" name="Inflation rate" value="2.5" size="4">%
        </p>
        <p>
            Compounding period length (years):<br>
            <input type="number" id="CompoundingPeriod" name="Compounding period" value="10" size="4"> 
        </p>
        <p>
            Ending balance:<br>
            <input type="text" id="EndingBalance" readonly="readonly">
        </p>
        <div id="RJSStartingBalance"></div>
        <p id="output"></p>
        <script>
            function DefaultValueIfEmpty(element){
                if(element.value=="" || isNaN(element.value) || element.value==null){
                    document.getElementById(element.id).value = element.defaultValue;
                }
            }
            function ComputeCompoundInterest(Data){
                var effectiveGrowthRate = Data.InterestRate - Data.InflationRate;
                return Data.StartingBalance*(1+effectiveGrowthRate)**Data.CompoundingPeriod;

            }
            function OnGainFocus(element){
                document.getElementById(element.id).style.backgroundColor = "yellow";
            }
            function OnLoseFocus(element){
                document.getElementById(element.id).style.backgroundColor = "";
                DefaultValueIfEmpty(element);
                var data = {};
                data.StartingBalance = document.getElementById("StartingBalance").value;
                data.InterestRate = document.getElementById("InterestRate").value/100;
                data.InflationRate = document.getElementById("InflationRate").value/100;
                data.CompoundingPeriod = document.getElementById("CompoundingPeriod").value;
                document.getElementById("EndingBalance").value = formatMoney(ComputeCompoundInterest(data));
            }
            function formatMoney(number) {
                return new Intl.NumberFormat('en-US', {style: 'currency', currency:'USD'}).format(number);
            }
            // Event listeners for form fields gaining focus
            document.getElementById("StartingBalance").addEventListener("focusin", function() { 
                OnGainFocus(this);
            });
            document.getElementById("InterestRate").addEventListener("focusin", function() { 
                OnGainFocus(this);
            });
            document.getElementById("InflationRate").addEventListener("focusin", function() { 
                OnGainFocus(this);
            });
            document.getElementById("CompoundingPeriod").addEventListener("focusin", function() { 
                OnGainFocus(this);
            });

            // Event listeners for form fields losing focus
            document.getElementById("StartingBalance").addEventListener("focusout", function() { 
                OnLoseFocus(this);
            });
            document.getElementById("InterestRate").addEventListener("focusout", function() { 
                OnLoseFocus(this);
            });
            document.getElementById("InflationRate").addEventListener("focusout", function() { 
                OnLoseFocus(this);
            });
            document.getElementById("CompoundingPeriod").addEventListener("focusout", function() { 
                OnLoseFocus(this);
            });
        </script>
    


    </body>
</html>