<html>
    <body>
        <p>Initial Balance ($):<br>
            <input type="number" id="StartingBalance" name="Starting balance" value="1000">
        </p>
        <p>
            Inflation rate (%):<br>
            <input type="number" id="InflationRate" name="Inflation rate" value="2.5" size="4">%
        </p>
        <p>
            Years:<br>
            <input type="number" id="CompoundingPeriod" name="Compounding period" value="10" size="2"> 
        </p>
        <p>
            Ending balance:<br>
            <input type="text" id="EndingBalance" readonly="readonly">
        </p>
        <div id="RJSStartingBalance"></div>
        <p id="output"></p>
        <script>
            function DefaultValueIfEmpty(element){
                if(element.value=="" || isNaN(element.value) || element.value==null){
                    document.getElementById(element.id).value = element.defaultValue;
                }
            }
            function ComputeInflation(){
                var data = {};
                data.StartingBalance = document.getElementById("StartingBalance").value;
                data.InflationRate = document.getElementById("InflationRate").value/100;
                data.CompoundingPeriod = document.getElementById("CompoundingPeriod").value;
                var postinflation = data.StartingBalance*(1-data.InflationRate)**data.CompoundingPeriod;
                document.getElementById("EndingBalance").value = formatMoney(postinflation,2);
                return postinflation;
            }
            function OnGainFocus(element){
                document.getElementById(element.id).style.backgroundColor = "yellow";
            }
            function OnLoseFocus(element){
                document.getElementById(element.id).style.backgroundColor = "";
                DefaultValueIfEmpty(element);
            }
            function formatMoney(number, decPlaces, decSep, thouSep) {
                decPlaces = isNaN(decPlaces = Math.abs(decPlaces)) ? 2 : decPlaces,
                decSep = typeof decSep === "undefined" ? "." : decSep;
                thouSep = typeof thouSep === "undefined" ? "," : thouSep;
                var sign = number < 0 ? "-$" : "$";
                var i = String(parseInt(number = Math.abs(Number(number) || 0).toFixed(decPlaces)));
                var j = (j = i.length) > 3 ? j % 3 : 0;

                return sign +
                    (j ? i.substr(0, j) + thouSep : "") +
                    i.substr(j).replace(/(\decSep{3})(?=\decSep)/g, "$1" + thouSep) +
                    (decPlaces ? decSep + Math.abs(number - i).toFixed(decPlaces).slice(2) : "");
            }
            // Event listeners for form fields gaining focus
            document.getElementById("StartingBalance").addEventListener("focusin", function() { 
                OnGainFocus(this);
            });
            document.getElementById("InflationRate").addEventListener("focusin", function() { 
                OnGainFocus(this);
            });
            document.getElementById("CompoundingPeriod").addEventListener("focusin", function() { 
                OnGainFocus(this);
            });

            // Event listeners for form fields losing focus
            document.getElementById("StartingBalance").addEventListener("focusout", function() { 
                OnLoseFocus(this);
            });
            document.getElementById("InflationRate").addEventListener("focusout", function() { 
                OnLoseFocus(this);
            });
            document.getElementById("CompoundingPeriod").addEventListener("focusout", function() { 
                OnLoseFocus(this);
            });
            ComputeInflation();
            //document.getElementById("b").addEventListener("click", event => {
            //    document.getElementById("x").innerText = "Result was: " + formatMoney(document.getElementById("d").value);
            //});
        </script>
    


    </body>
</html>